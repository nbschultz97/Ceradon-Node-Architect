<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ceradon Node Architect</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    :root {
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
    }

    #access-gate {
      max-width: 720px;
      margin: 48px auto;
      padding: 32px;
      background: #f8f9fb;
      border: 1px solid #e1e5eb;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
    }

    #access-gate h1 {
      margin: 0 0 8px;
      font-size: 1.8rem;
    }

    #access-gate p {
      margin: 0 0 16px;
      color: #4b5563;
    }

    #access-gate label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }

    #access-gate input[type="password"] {
      width: 100%;
      padding: 12px;
      border: 1px solid #cbd5e1;
      border-radius: 8px;
      font-size: 1rem;
      box-sizing: border-box;
    }

    #access-gate button {
      margin-top: 12px;
      padding: 12px 18px;
      font-size: 1rem;
      font-weight: 700;
      background: #0f172a;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    #access-gate button:hover {
      background: #111827;
    }

    .error-message {
      display: none;
      margin-top: 10px;
      color: #b91c1c;
      font-size: 0.95rem;
    }

    .demo-request {
      max-width: 900px;
      margin: 24px auto 16px;
      padding: 24px;
      background: #f3f4f6;
      border: 1px solid #e1e5eb;
      border-radius: 12px;
    }

    .demo-request-inner {
      max-width: 820px;
      margin: 0 auto;
    }

    .demo-request h2 {
      margin: 0 0 8px;
      font-size: 1.4rem;
    }

    .demo-request p {
      margin: 0 0 12px;
      color: #374151;
      line-height: 1.5;
    }

    .demo-request-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }

    .demo-request-btn {
      display: inline-block;
      text-decoration: none;
      text-align: center;
      padding: 12px 18px;
      border-radius: 10px;
      font-weight: 700;
      color: #0c1418;
      background: #4db6ac;
      border: none;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.2s ease;
    }

    .demo-request-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 20px rgba(77, 182, 172, 0.25);
    }

    .demo-request-email {
      margin: 0;
      color: #4b5563;
    }

    .demo-request-email a {
      color: #0f172a;
      font-weight: 700;
      text-decoration: none;
    }

    .demo-request-email a:hover {
      text-decoration: underline;
    }

    @media (min-width: 640px) {
      .demo-request-actions {
        flex-direction: row;
        align-items: center;
        gap: 16px;
      }

      .demo-request-email {
        margin: 0;
      }
    }
  </style>
</head>
<body>
  <div id="access-gate" role="region" aria-labelledby="access-gate-title">
    <h1 id="access-gate-title">Ceradon Systems — Ceradon Node Architect Demo</h1>
    <p>Ceradon Node Architect is part of the Ceradon Architect COTS planning suite. Access is demo-code gated.</p>
    <label for="demo-code">Access code</label>
    <input id="demo-code" type="password" name="access-code" autocomplete="off" inputmode="numeric" />
    <p class="muted small">Use demo code <strong>NODE-GRID-429</strong> for the public demo.</p>
    <button id="demo-enter" type="button">Enter</button>
    <div id="demo-error" class="error-message" aria-live="polite">Invalid code.</div>
  </div>

  <section id="demo-request" class="demo-request">
    <div class="demo-request-inner">
      <h2>Request a demo code</h2>
      <p>
        Ceradon Systems provides controlled access to <strong>Ceradon Node Architect</strong> for qualified organizations.
        Request a demo code to explore the live node planner and see how it fits your mission profiles.
      </p>
      <div class="demo-request-actions">
        <a
          id="demo-request-button"
          class="demo-request-btn"
          href="mailto:contact@ceradonsystems.com?subject=Demo%20code%20request%20%E2%80%93%20Ceradon%20Node%20Architect&body=Hi%20Ceradon%20team,%0D%0A%0D%0AI'd%20like%20to%20request%20a%20demo%20access%20code%20for%20Ceradon%20Node%20Architect.%0D%0A%0D%0AOrganization:%20%0D%0AUse%20case:%20%0D%0ATimeline:%20%0D%0A%0D%0AThank%20you."
        >
          Request a demo code
        </a>

        <p class="demo-request-email">
          Or email us at
          <a href="mailto:contact@ceradonsystems.com?subject=Demo%20code%20request%20%E2%80%93%20Ceradon%20Node%20Architect">
            contact@ceradonsystems.com
          </a>
          with your organization and use case.
        </p>
      </div>
    </div>
  </section>

      <div id="app-root" style="display: none;">
        <header class="page-header">
          <div class="container">
            <h1>Ceradon Node Architect</h1>
            <p class="lead">Assemble low-power RF and sensor nodes, explore presets, and estimate draw, runtime, and range entirely in the browser.</p>
            <div class="page-meta">
              <span class="badge" id="app-version-badge">Node Architect</span>
              <span class="badge" id="schema-version-badge">MissionProject schema</span>
            </div>
          </div>
        </header>

    <main class="container layout">
      <section class="card" id="config-card">
        <h2>Configure node</h2>
        <div id="error-banner" class="error-banner" role="alert" aria-live="polite"></div>

        <div class="fieldset">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">Presets</p>
              <h3>Common node templates</h3>
            </div>
          </div>
          <div class="form-group">
            <label for="preset-select">Preset</label>
            <select id="preset-select">
              <option value="">Custom (no preset)</option>
            </select>
            <p id="preset-description" class="muted small">Pick a preset to pre-fill radios, antennas, and sensors.</p>
          </div>
        </div>

          <div class="fieldset">
            <div class="fieldset-header">
              <div>
                <p class="eyebrow">Node metadata</p>
                <h3>Naming and role tags</h3>
                <p class="muted small">Label the design for downstream planners and tag roles it can cover.</p>
              </div>
            </div>
            <div class="form-group">
              <label for="mission-name">Mission/project name</label>
              <input id="mission-name" type="text" placeholder="Project WHITEFROST Demo" />
            </div>
            <div class="form-group">
              <label for="node-name">Node name</label>
              <input id="node-name" type="text" placeholder="e.g., Urban relay node" />
            </div>
            <div class="form-group">
              <label>Roles (select one or more)</label>
            <div id="role-checkboxes" class="role-checkboxes"></div>
          </div>
          <div class="form-group">
            <label for="node-notes">Notes</label>
            <textarea id="node-notes" rows="3" placeholder="Mission notes, mounting constraints, cabling details..."></textarea>
          </div>
        </div>

          <div class="fieldset">
            <div class="fieldset-header">
              <div>
                <p class="eyebrow">Compute</p>
              <h3>Host platform</h3>
              </div>
            </div>
            <div class="form-group">
              <label for="compute-select">Compute host</label>
              <select id="compute-select">
                <option value="">Select compute</option>
              </select>
            </div>
          </div>

        <div class="fieldset">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">RF Chains</p>
              <h3>Radios and antennas</h3>
              <p class="muted small">Add one or more RF chains. Capacity is limited by the selected host.</p>
            </div>
            <button id="add-rf-chain-btn" class="ghost-btn" type="button">+ Add RF Chain</button>
          </div>
          <div id="rf-chains-container" class="rf-chains"></div>
          <p id="rf-chain-count" class="muted small">RF chains: 0 / 0 available</p>
        </div>

        <div class="fieldset">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">Sensors</p>
              <h3>Payload</h3>
            </div>
          </div>
          <div id="sensors-container" class="sensor-checkboxes"></div>
        </div>

        <div class="fieldset">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">Power</p>
              <h3>Battery and endurance</h3>
              <p class="muted small">Select the pack used for runtime math. Adjusted runtime reflects environment derates.</p>
            </div>
          </div>
          <div class="form-group">
            <label for="battery-select">Battery</label>
            <select id="battery-select">
              <option value="">Select battery</option>
            </select>
          </div>
        </div>

        <div class="fieldset">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">Environment</p>
              <h3>Environment and constraints</h3>
            </div>
          </div>
          <div class="form-group">
            <label for="environment-select">Environment</label>
            <select id="environment-select">
              <option value="lab">Lab</option>
              <option value="urban_indoor">Urban indoor</option>
              <option value="urban_outdoor">Urban outdoor</option>
              <option value="rural_open">Rural open</option>
            </select>
          </div>
            <div class="env-grid">
              <div class="form-group">
                <label for="altitude-select">Altitude band</label>
                <select id="altitude-select">
                  <option value="sea_level">Sea level / < 500 m</option>
                <option value="band_1000_2000">1000–2000 m</option>
                <option value="band_2000_3000">2000–3000 m</option>
                <option value="above_3000">> 3000 m</option>
              </select>
            </div>
            <div class="form-group">
                <label for="temperature-select">Temperature band</label>
                <select id="temperature-select">
                  <option value="hot">Hot</option>
                  <option value="temperate">Temperate</option>
                  <option value="cold">Cold</option>
                  <option value="very_cold">Very cold</option>
                </select>
              </div>
            </div>
            <div class="env-grid">
              <div class="form-group">
                <label for="lat-input">Latitude</label>
                <input id="lat-input" type="number" step="0.0001" placeholder="e.g., 39.55" />
              </div>
              <div class="form-group">
                <label for="lon-input">Longitude</label>
                <input id="lon-input" type="number" step="0.0001" placeholder="e.g., -105.78" />
              </div>
              <div class="form-group">
                <label for="elevation-input">Elevation (m)</label>
                <input id="elevation-input" type="number" step="1" placeholder="e.g., 2600" />
              </div>
            </div>
          </div>

          <button id="evaluate-btn" class="primary-btn" type="button">Evaluate node</button>
        </section>

      <div class="stacked-column">
        <section class="card" id="results-panel">
          <h2>Results</h2>
          <div class="muted small">Load components and evaluate a configuration to see estimates.</div>
        </section>

        <section class="card" id="designs-panel">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">Library</p>
              <h3>Saved node designs</h3>
            </div>
            <div class="button-stack">
              <button id="whitefrost-demo" class="ghost-btn" type="button">Load WHITEFROST Demo</button>
              <label for="import-mission" class="ghost-btn file-btn" role="button" aria-label="Import MissionProject JSON">
                Import MissionProject
                <input id="import-mission" type="file" accept="application/json" />
              </label>
              <button id="export-designs" class="ghost-btn" type="button">Export MissionProject</button>
            </div>
          </div>

          <div class="fieldset">
            <div class="fieldset-header">
              <div>
                <p class="eyebrow">Constraints</p>
                <h3>Filter by limits</h3>
                <p class="muted small">Optional constraints screen out designs that exceed weight, runtime, or role needs.</p>
              </div>
            </div>
            <div class="constraints-grid">
              <div class="form-group">
                <label for="max-weight">Max node weight (kg)</label>
                <input id="max-weight" type="number" min="0" step="0.1" placeholder="e.g., 2.5" />
              </div>
              <div class="form-group">
                <label for="min-runtime">Min adjusted runtime (hours)</label>
                <input id="min-runtime" type="number" min="0" step="0.5" placeholder="e.g., 6" />
              </div>
            </div>
            <div class="form-group">
              <label>Required roles</label>
              <div id="required-role-checkboxes" class="role-checkboxes"></div>
            </div>
            <p class="muted small">Constraints update automatically and persist locally.</p>
          </div>

          <div id="designs-list" class="designs-list muted small">No saved designs yet.</div>
        </section>

        <section class="card" id="mission-preview-card">
          <div class="fieldset-header">
            <div>
              <p class="eyebrow">MissionProject preview</p>
              <h3>Schema-aligned export (v2.0.0)</h3>
              <p class="muted small">Review the exact MissionProject JSON that will be exported; copy or download without leaving the page.</p>
            </div>
            <div class="button-stack">
              <button id="copy-mission-preview" class="ghost-btn" type="button">Copy JSON</button>
              <button id="download-mission-preview" class="ghost-btn" type="button">Download JSON</button>
            </div>
          </div>

          <pre id="mission-preview" class="json-preview" aria-live="polite">Add node designs to generate a MissionProject bundle preview.</pre>
        </section>

        <section class="card" id="change-log-card">
          <h2>Change Log</h2>
          <div id="change-log-entries" class="change-log"></div>
        </section>
      </div>
    </main>
    <footer class="page-footer">
      <div class="container">
        <p id="footer-version" class="small muted"></p>
      </div>
    </footer>
  </div>

  <script src="app.js"></script>
  <script>
    (function () {
      const ACCESS_CODE = "NODE-GRID-429";
      const STORAGE_KEY = "ceradonDemoAuthorized";

      function toggleVisibility(showApp) {
        const appRoot = document.getElementById("app-root");
        const accessGate = document.getElementById("access-gate");
        const demoRequest = document.getElementById("demo-request");
        if (showApp) {
          appRoot.style.display = "block";
          accessGate.style.display = "none";
          demoRequest.style.display = "none";
        } else {
          appRoot.style.display = "none";
          accessGate.style.display = "block";
          demoRequest.style.display = "block";
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const input = document.getElementById("demo-code");
        const button = document.getElementById("demo-enter");
        const error = document.getElementById("demo-error");

        if (localStorage.getItem(STORAGE_KEY) === "true") {
          toggleVisibility(true);
          return;
        }

        toggleVisibility(false);

        function validate() {
          const value = (input.value || "").trim();
          if (value === ACCESS_CODE) {
            localStorage.setItem(STORAGE_KEY, "true");
            error.style.display = "none";
            toggleVisibility(true);
          } else {
            error.style.display = "block";
          }
        }

        button.addEventListener("click", validate);
        input.addEventListener("keydown", (event) => {
          if (event.key === "Enter") {
            validate();
          }
        });
      });
    })();
  </script>
</body>
</html>
